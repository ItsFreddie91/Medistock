<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administración - MediStock</title>
    <link rel="stylesheet" href="/venta.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <nav>
                <ul>
                            <li>
                                <a href="/menu/inicio" >
                                    <img width="40" height="40" src="/icons/icons2.png" alt="user" class="menu-icon"/>
                                    Menu Inicio
                                </a>
                            </li>
                            <li>
                                <a href="/menu/datos_medicamentos">
                                    <img width="40" height="40" src="/icons/icons3.png" alt="user" class="menu-icon"/>
                                    Generar PDF Medicamentos
                                </a>
                            </li>
                            <li>
                                <a href="/menu/medicamentos">
                                    <img width="40" height="40" src="/icons/icons4.png" alt="user" class="menu-icon"/>
                                    Ingresar Medicamentos
                                </a>
                            </li>
                            <li>
                                <a href="/menu/clientes" class="active">
                                    <img width="40" height="40" src="/icons/iconusuario.png" alt="user" class="menu-icon"/>
                                    Gestionar Clientes
                                </a>
                            </li>
                            <li>
                                <a href="/menu/venta_vendedor">
                                    <img width="40" height="40" src="/icons/compra.png" alt="user" class="menu-icon"/>
                                    Realizar Venta
                                </a>
                            </li>
                            <li>
                                
                                <a href="/">
                                    <img width="40" height="40" src="/icons/cerrar-sesion.png" alt="user" class="menu-icon"/>
                                    Cerrar Sesión
                                </a>
                            </li>
                </ul>
            </nav>
        </aside>
        <main class="content">

            
            <section id="agregar-medicamentos" class="section">

                <h2>
                    Venta de Medicamentos
                    <img width="30" height="30" src="/icons/venta.png" alt="user" class="menu-icon buscar-cliente-icon"/>
                </h2>
                <form id="formVenta" method="POST">



                    <label for="cliente">Seleccionar Cliente:</label>
                        <select id="cliente" name="cliente" required>
                            <option value="" disabled selected>Selecciona un cliente</option>
                            <% if (clientes && clientes.length > 0) { %>
                                <% clientes.forEach(cliente => { %>
                                    <option value="<%= cliente.id_clientes %>">
                                        <%= cliente.nombre %> <%= cliente.apellido_paterno %> <%= cliente.apellido_materno %>
                                    </option>
                                <% }); %>
                            <% } else { %>
                                <option disabled>No hay clientes disponibles</option>
                            <% } %>
                        </select>









                    <label for="medicamento">Seleccionar Medicamento:</label>
                    <select id="medicamento" name="medicamento" required>
                        <option value="" disabled selected>Selecciona un medicamento</option>
<% if (medicamentos && medicamentos.length > 0) { %>
    <% medicamentos.forEach(medicamento => { %>
        <option 
            value="<%= medicamento.id_medicamentos %>" 
            data-precio="<%= medicamento.precio %>"
            <%= medicamento.cantidad <= 0 ? 'disabled' : '' %>>
            <%= medicamento.nombre %> (Disponibles: <%= medicamento.cantidad %> - Precio: $<%= medicamento.precio %>)
        </option>
    <% }); %>
<% } else { %>
    <option disabled>No hay medicamentos disponibles</option>
<% } %>

                    </select>
                    <br><br>
                    <label for="cantidad">Cantidad a Vender:</label>
                    <input type="number" id="cantidad" name="cantidad" min="1" required>
                    <br><br>
                    <button type="button" id="btnAgregar" class="btn-guardar">Agregar a la Venta</button>
                </form>
                
                <h3>Medicamentos Seleccionados:</h3>
                <ul id="listaMedicamentos"></ul>
                
                <p>Total a Pagar: <span id="total">0.00</span></p>
                <br><br>
                <button type="button" id="btnRealizarVenta" class="btn-guardar">Realizar Venta</button>
                

            </section>
                            <a href="/menu/historial_ventas" class="btn-historial">
                    Historial Ventas
                </a>
        </main>
    </div>
    <script src="/js/venta.js"></script>
</body>
</html>